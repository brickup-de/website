{{- $link := .Destination -}}
{{- $isImage := strings.Contains .Text "<img" -}}
{{- $isExternal := strings.HasPrefix $link "http" -}}
{{- if not $isExternal -}}
  {{- $isExternal = strings.HasPrefix $link "//" -}}
{{- end -}}

<a href="{{ .Destination | safeURL }}"
   {{- with .Title }} title="{{ . }}"{{ end }}
   {{- if $isExternal }} target="_blank" rel="noopener noreferrer"{{ end -}}
>{{ .Text | safeHTML }}{{ if and $isExternal (not $isImage) }}â†—{{ end }}</a>